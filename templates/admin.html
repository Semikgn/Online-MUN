<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MUN Kriz YÃ¶netim Merkezi</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { 
            background-color: #2c3e50; 
            color: #ecf0f1; /* VarsayÄ±lan yazÄ± rengi: Parlak Beyaz/Gri */
            padding-top: 30px; 
            padding-bottom: 50px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .main-card { 
            background-color: #34495e; 
            border: none; 
            border-radius: 15px; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        
        /* BaÅŸlÄ±klar ve Etiketler */
        h2, h4 { color: #fff; }
        .form-label { font-weight: bold; color: #f1c40f; }
        
        /* Input ve Select KutularÄ± */
        .form-select, .form-control {
            background-color: #2c3e50; /* Kutu iÃ§i koyu */
            border: 1px solid #4ecdc4;
            color: #fff !important; /* YazÄ± kesinlikle BEYAZ */
        }
        
        /* Input'a tÄ±klayÄ±nca (Focus) */
        .form-select:focus, .form-control:focus {
            background-color: #2c3e50;
            color: #fff !important;
            border-color: #f1c40f;
            box-shadow: 0 0 0 0.25rem rgba(241, 196, 15, 0.25);
        }

        /* Placeholder (Silik yazÄ±) Rengi */
        ::placeholder { 
            color: #95a5a6 !important; 
            opacity: 1; 
        }
        
        /* Bootstrap'in 'text-muted' sÄ±nÄ±fÄ±nÄ± eziyoruz (ArtÄ±k aÃ§Ä±k gri olacak) */
        .text-muted {
            color: #bdc3c7 !important;
        }

        /* Modal (Popup) AyarlarÄ± */
        .modal-content { background-color: #2c3e50; color: white; border: 1px solid #4ecdc4; }
        .modal-header { border-bottom: 1px solid #4ecdc4; }
        .modal-footer { border-top: 1px solid #4ecdc4; }
        .btn-close { filter: invert(1); } /* Kapatma Ã§arpÄ±sÄ±nÄ± beyaz yap */
        
        /* Danger Zone Ã–zel Stilleri */
        .danger-card {
            border: 2px solid #e74c3c;
            background-color: rgba(231, 76, 60, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <h2 class="text-center mb-4" style="color: #4ecdc4; text-transform: uppercase; letter-spacing: 2px;">
            âš¡ MUN Kriz YÃ¶netim Merkezi
        </h2>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, msg in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show shadow-lg" role="alert">
                        <strong>BÄ°LGÄ°:</strong> {{ msg }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <div class="card p-4 main-card mb-5">
            <h4 class="mb-3 border-bottom pb-2" style="border-color: #7f8c8d !important;">ğŸ® Oyun KontrolÃ¼</h4>
            
            <form id="actionForm" action="/api/execute_action" method="POST">
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">ğŸš€ SaldÄ±ran / BaÅŸlatan</label>
                        <select name="source_id" class="form-select">
                            {% for country in countries %}
                            <option value="{{ country.id }}">{{ country.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ğŸ¯ Hedef Ãœlke</label>
                        <select name="target_id" class="form-select">
                            {% for country in countries %}
                            <option value="{{ country.id }}">{{ country.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label class="form-label">âš¡ Eylem TÃ¼rÃ¼</label>
                        <select name="action_type" class="form-select">
                            <option value="embargo">ğŸ›¢ï¸ Enerji/GÄ±da Ambargosu</option>
                            <option value="cyber_attack">ğŸ’» Siber SaldÄ±rÄ±</option>
                            <option value="military_conflict">âš”ï¸ Askeri Ã‡atÄ±ÅŸma</option>
                            <option value="trade_deal">ğŸ¤ Ticaret AnlaÅŸmasÄ±</option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">ğŸ”¥ Åiddet Seviyesi</label>
                        <select name="intensity" class="form-select">
                            <option value="low">ğŸŸ¢ DÃ¼ÅŸÃ¼k (Nota / UyarÄ±)</option>
                            <option value="medium" selected>ğŸŸ¡ Orta (Standart YaptÄ±rÄ±m)</option>
                            <option value="high">ğŸ”´ YÃ¼ksek (SavaÅŸ / Abluka)</option>
                        </select>
                    </div>
                </div>

                <div class="mb-4">
                    <label class="form-label">ğŸ“¢ GerekÃ§e / Haber Metni</label>
                    <input type="text" name="justification" class="form-control" placeholder="Ã–rn: SÄ±nÄ±r ihlalleri gerekÃ§esiyle...">
                </div>

                <button type="button" class="btn btn-danger w-100 btn-lg fw-bold" data-bs-toggle="modal" data-bs-target="#confirmActionModal">
                    EYLEMÄ° GERÃ‡EKLEÅTÄ°R
                </button>
            </form>
        </div>

        <div class="card p-4 main-card danger-card text-center">
            <h4 class="text-danger">â˜ ï¸ TEHLÄ°KELÄ° BÃ–LGE</h4>
            <p class="text-muted">Bu iÅŸlem tÃ¼m oyun geÃ§miÅŸini siler ve Ã¼lkeleri fabrika ayarlarÄ±na dÃ¶ndÃ¼rÃ¼r.</p>
            
            <button type="button" class="btn btn-outline-danger px-5" data-bs-toggle="modal" data-bs-target="#resetGameModal">
                ğŸ›‘ OYUNU SIFIRLA
            </button>
        </div>
    </div>

    <div class="modal fade" id="confirmActionModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">âš ï¸ Eylem OnayÄ±</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
                </div>
                <div class="modal-body">
                    <p>Bu hamleyi yapmak Ã¼zeresiniz. Puanlar kalÄ±cÄ± olarak deÄŸiÅŸecek.</p>
                    <p class="text-warning fw-bold">OnaylÄ±yor musunuz?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">VazgeÃ§</button>
                    <button type="button" class="btn btn-danger" onclick="submitAction()">Evet, Yap</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="resetGameModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content border-danger">
                <div class="modal-header bg-danger text-white">
                    <h5 class="modal-title">ğŸš¨ KRÄ°TÄ°K UYARI</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
                </div>
                <div class="modal-body">
                    <p>TÃ¼m haberler, puanlar ve loglar <strong>SÄ°LÄ°NECEK</strong>.</p>
                    <p class="fs-5">Oyunu "GÃ¼n 1"e dÃ¶ndÃ¼rmek istediÄŸine emin misin?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Ä°ptal</button>
                    <form action="/api/reset_game" method="POST">
                        <button type="submit" class="btn btn-danger fw-bold">EVET, SIFIRLA</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function submitAction() {
            document.getElementById('actionForm').submit();
        }
    </script>
</body>
</html>